const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  // const fs = require("node:fs");
  // const mime = require("mime-types");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Charlotte, North Carolina, United States, for 2 Days and 1 Nights for a A Couple with Mid-Range budget with flight details, Flight Price with Booking URL, Hotels options list with HotelName, Hotel Address, Price, hotel image url, geo coordinates, rating, description, and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Timing to travel each of the locations for 2 day and 1 night with each day plan with best time to visit in JSON format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON-formatted travel plan for a couple visiting Charlotte, NC, for 2 days and 1 night on a mid-range budget. I'll include flight details (example, will need to be adjusted based on your actual travel dates and origin), hotel options, and a detailed itinerary.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Charlotte, North Carolina, United States\",\n    \"duration\": \"2 Days, 1 Night\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Mid-Range\"\n  },\n  \"flights\": {\n    \"arrival\": {\n      \"airline\": \"American Airlines (Example)\",\n      \"flightNumber\": \"AA 1234 (Example)\",\n      \"origin\": \"Your Origin City (Example)\",\n      \"destination\": \"Charlotte Douglas International Airport (CLT)\",\n      \"arrivalTime\": \"10:00 AM (Example)\",\n      \"flightPrice\": 200,\n      \"bookingURL\": \"https://www.exampleflightbooking.com (Example - Replace with actual booking site)\"\n    },\n    \"departure\": {\n      \"airline\": \"American Airlines (Example)\",\n      \"flightNumber\": \"AA 5678 (Example)\",\n      \"origin\": \"Charlotte Douglas International Airport (CLT)\",\n      \"destination\": \"Your Origin City (Example)\",\n      \"departureTime\": \"6:00 PM (Example)\",\n      \"flightPrice\": 200,\n      \"bookingURL\": \"https://www.exampleflightbooking.com (Example - Replace with actual booking site)\"\n    }\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"The Ivey's Hotel\",\n      \"hotelAddress\": \"127 N Tryon St, Charlotte, NC 28202\",\n      \"price\": 250,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/58/51/3f/the-ivey-s-hotel.jpg?w=900&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 35.2272,\n        \"longitude\": -80.8431\n      },\n      \"rating\": 4.5,\n      \"description\": \"A luxurious boutique hotel in the heart of Uptown Charlotte, featuring elegant rooms and a sophisticated atmosphere.\",\n      \"amenities\":[\"Free Wifi\", \"Restaurant\", \"Bar\", \"Fitness Center\"]\n    },\n    {\n      \"hotelName\": \"Kimpton Tryon Park Hotel\",\n      \"hotelAddress\": \"303 S Church St, Charlotte, NC 28202\",\n      \"price\": 230,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/16/44/4a/74/kimpton-tryon-park-hotel.jpg?w=900&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 35.2224,\n        \"longitude\": -80.8479\n      },\n      \"rating\": 4.6,\n      \"description\": \"Stylish hotel with rooftop bar, offering modern rooms and city views. Convenient location.\",\n      \"amenities\":[\"Free Wifi\", \"Restaurant\", \"Bar\", \"Fitness Center\", \"Pet-Friendly\"]\n    },\n    {\n      \"hotelName\": \"Embassy Suites by Hilton Charlotte Uptown\",\n      \"hotelAddress\": \"401 E Martin Luther King Jr Blvd, Charlotte, NC 28202\",\n      \"price\": 180,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0f/b2/7e/71/embassy-suites-by-hilton.jpg?w=900&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 35.2204,\n        \"longitude\": -80.8379\n      },\n      \"rating\": 4.2,\n      \"description\": \"All-suite hotel with complimentary breakfast and evening reception. Near attractions.\",\n      \"amenities\":[\"Free Breakfast\", \"Restaurant\", \"Bar\", \"Pool\", \"Fitness Center\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"date\": \"2024-03-16 (Example)\",\n      \"theme\": \"Uptown Exploration and Southern Charm\",\n      \"schedule\": [\n        {\n          \"time\": \"10:00 AM\",\n          \"activity\": \"Arrival at Charlotte Douglas International Airport (CLT)\",\n          \"details\": \"Pick up rental car (if applicable) or take a ride-sharing service to your hotel in Uptown.\",\n          \"duration\": \"1 hour\"\n        },\n        {\n          \"time\": \"11:00 AM\",\n          \"activity\": \"Check-in at Hotel\",\n          \"details\": \"Check in to your hotel, leave your luggage.\",\n          \"duration\": \"30 minutes\"\n        },\n        {\n          \"time\": \"11:30 AM\",\n          \"activity\": \"Lunch at Optimist Hall\",\n          \"details\": \"Explore diverse food stalls at Optimist Hall. Enjoy lunch. A vibrant food hall in a historic mill.\",\n          \"placeName\": \"Optimist Hall\",\n          \"placeDetails\": \"Food Hall with many options\",\n          \"placeImageUrl\": \"https://optimisthall.com/wp-content/uploads/2021/05/Optimist_Hall_Exterior_Front_Optimist_Hall_Charlotte_North_Carolina-2048x1365.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2379,\n            \"longitude\": -80.8311\n          },\n          \"ticketPricing\": \"Varies by vendor\",\n          \"bestTimeToVisit\": \"Lunch Time\",\n          \"duration\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"activity\": \"NASCAR Hall of Fame\",\n          \"details\": \"Immerse yourselves in the world of NASCAR. Explore exhibits and interactive displays.\",\n          \"placeName\": \"NASCAR Hall of Fame\",\n          \"placeDetails\": \"Museum dedicated to the history of NASCAR\",\n          \"placeImageUrl\": \"https://www.nascarhall.com/assets/img/content/about-2.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2212,\n            \"longitude\": -80.8349\n          },\n          \"ticketPricing\": \"$27.99 per adult\",\n          \"timing\": \"10:00 AM - 5:00 PM\",\n          \"bestTimeToVisit\": \"Afternoon\",\n          \"duration\": \"2 hours\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"activity\": \"Romare Bearden Park\",\n          \"details\": \"Relax and enjoy the urban oasis of Romare Bearden Park. Perfect for a stroll.\",\n          \"placeName\": \"Romare Bearden Park\",\n          \"placeDetails\": \"A beautiful park in the heart of Uptown Charlotte.\",\n          \"placeImageUrl\": \"https://charlottecentercity.org/wp-content/uploads/2013/04/Romare-Bearden-Park.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2243,\n            \"longitude\": -80.8441\n          },\n          \"ticketPricing\": \"Free\",\n          \"timing\": \"6:00 AM - 11:00 PM\",\n          \"bestTimeToVisit\": \"Afternoon\",\n          \"duration\": \"1 hour\"\n        },\n        {\n          \"time\": \"4:00 PM\",\n          \"activity\": \"7th Street Public Market\",\n          \"details\": \"Sample local food and browse artisan goods at the 7th Street Public Market.\",\n          \"placeName\": \"7th Street Public Market\",\n          \"placeDetails\": \"Indoor market with local vendors\",\n          \"placeImageUrl\": \"https://7thstreetpublicmarket.com/wp-content/uploads/2018/03/IMG_0338-2-2-e1521738178587.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2264,\n            \"longitude\": -80.8398\n          },\n          \"ticketPricing\": \"Varies by vendor\",\n          \"timing\": \"Varies by vendor, generally open until 6:00 PM\",\n          \"bestTimeToVisit\": \"Late Afternoon\",\n          \"duration\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"5:30 PM\",\n          \"activity\": \"Dinner in Uptown\",\n          \"details\": \"Choose from a variety of restaurants in Uptown. Consider Fahrenheit for skyline views.\",\n          \"duration\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"7:00 PM\",\n          \"activity\": \"Evening Activities\",\n          \"details\": \"Enjoy a drink at a rooftop bar, catch a show at Blumenthal Performing Arts Center, or explore the nightlife in Uptown.\",\n          \"duration\": \"Rest of the Evening\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"date\": \"2024-03-17 (Example)\",\n      \"theme\": \"Arts, History and Departure\",\n      \"schedule\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"activity\": \"Breakfast at Hotel or Local Cafe\",\n          \"details\": \"Enjoy breakfast at your hotel or explore a local cafe.\",\n          \"duration\": \"1 hour\"\n        },\n        {\n          \"time\": \"10:00 AM\",\n          \"activity\": \"Mint Museum Uptown\",\n          \"details\": \"Explore art from around the world at the Mint Museum Uptown.\",\n          \"placeName\": \"Mint Museum Uptown\",\n          \"placeDetails\": \"Art museum in Uptown Charlotte.\",\n          \"placeImageUrl\": \"https://mintmuseum.org/wp-content/uploads/2019/07/mint_museum_uptown_front-1400x700.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2274,\n            \"longitude\": -80.8411\n          },\n          \"ticketPricing\": \"$15 per adult\",\n          \"timing\": \"11:00 AM - 6:00 PM (Sunday)\",\n          \"bestTimeToVisit\": \"Morning\",\n          \"duration\": \"2 hours\"\n        },\n        {\n          \"time\": \"12:00 PM\",\n          \"activity\": \"Lunch\",\n          \"details\": \"Have lunch near the Mint Museum. Many restaurants are within walking distance.\",\n          \"duration\": \"1 hour\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"activity\": \"Historic Fourth Ward\",\n          \"details\": \"Stroll through the charming Victorian-era neighborhood of Historic Fourth Ward.\",\n          \"placeName\": \"Historic Fourth Ward\",\n          \"placeDetails\": \"Historic residential neighborhood\",\n          \"placeImageUrl\": \"https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,h_640,q_75,w_640/v1/clients/charlotte/FourthWard_628x390_2ed16b25-c18c-463a-a32f-18cf15b874c1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2314,\n            \"longitude\": -80.8446\n          },\n          \"ticketPricing\": \"Free\",\n          \"bestTimeToVisit\": \"Afternoon\",\n          \"duration\": \"1.5 hours\"\n        },\n         {\n          \"time\": \"2:30 PM\",\n          \"activity\": \"Discovery Place Science\",\n          \"details\": \"Interactive science museum great for all ages.\",\n          \"placeName\": \"Discovery Place Science\",\n          \"placeDetails\": \"Science and technology museum.\",\n          \"placeImageUrl\": \"https://www.visitnc.com/assets/uploads/dpscience_exhibit_640px.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.2282,\n            \"longitude\": -80.8386\n          },\n          \"ticketPricing\": \"$22 per adult\",\n          \"timing\": \"12:00 PM - 5:00 PM (Sunday)\",\n          \"bestTimeToVisit\": \"Afternoon\",\n          \"duration\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"4:00 PM\",\n          \"activity\": \"Head to Airport\",\n          \"details\": \"Allow ample time to return your rental car (if applicable) and check in for your flight.\",\n          \"duration\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"activity\": \"Departure from Charlotte Douglas International Airport (CLT)\",\n          \"details\": \"Depart from Charlotte.\",\n          \"duration\": \"N/A\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Important Notes and Considerations:**\n\n*   **Flight Prices and Booking URLs:**  The flight prices and booking URLs are examples. You'll need to use flight search engines (Google Flights, Kayak, Expedia, etc.) to find the best deals for your specific dates and origin.\n*   **Hotel Prices:** Hotel prices fluctuate. Use hotel booking websites (Booking.com, Expedia, Hotels.com, etc.) to check current rates and availability.  Prices are estimates.\n*   **Restaurant Recommendations:**  I've included general areas for dining.  Use Yelp, TripAdvisor, or other review sites to find restaurants that match your preferences.\n*   **Ticket Prices and Timings:**  Museum/attraction ticket prices and opening hours are subject to change.  Always check the official website of each attraction before your visit.\n*   **Transportation:** This itinerary assumes you'll be using a combination of ride-sharing services (Uber/Lyft) and walking.  If you plan to visit areas outside of Uptown, consider renting a car.\n*   **Customization:**  This is a template.  Feel free to customize it based on your interests. If you love art, spend more time at the Mint Museum. If you're a foodie, explore more culinary options.\n*   **Reservations:** Make reservations for popular restaurants or attractions, especially if you're traveling during peak season.\n*   **Flexibility:**  Be prepared to adjust your itinerary if needed due to weather, unexpected delays, or your own changing preferences.\n*   **Pace:** This is a fairly packed itinerary.  If you prefer a more relaxed pace, consider removing some activities.\n\nThis comprehensive JSON provides a solid framework for your Charlotte getaway.  Enjoy your trip!\n"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    //console.log(result.response.text());
  
  
